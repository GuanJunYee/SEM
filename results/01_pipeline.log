[2025-09-08 14:04:26] DATA PIPELINE WITH SMART RECOVERY
[2025-09-08 14:04:26] ============================================================
[2025-09-08 14:04:26] STEP 1: DATA CLEANING WITH SMART RECOVERY
[2025-09-08 14:04:26] ============================================================
[2025-09-08 14:04:26] Loaded raw data: (12575, 11) records
[2025-09-08 14:04:26] Missing values before cleaning: 7229 total
[2025-09-08 14:04:26] 
=== PHASE 1: IDENTIFYING UNRECOVERABLE ROWS ===
[2025-09-08 14:04:26] Unrecoverable rows (missing both Quantity & Total): 604
[2025-09-08 14:04:26] [OK] Saved 604 dropped rows to: 01_dropped_rows_report.csv
[2025-09-08 14:04:26] Working with 11971 recoverable rows
[2025-09-08 14:04:26] 
=== PHASE 2: SMART RECOVERY ===
[2025-09-08 14:04:26] 1. Standardizing Discount Applied...
[2025-09-08 14:04:26] [OK] Standardized to boolean; filled 3988 missing with False
[2025-09-08 14:04:26] 2. Recovering missing prices using Total / Quantity...
[2025-09-08 14:04:26] [OK] Recovered 609 prices
[2025-09-08 14:04:26] 3. Recovering missing quantities using Total / Price...
[2025-09-08 14:04:26] 4. Recovering missing totals using Price x Quantity...
[2025-09-08 14:04:26] 5. Inferring missing items from Category + Price...
[2025-09-08 14:04:27] [OK] Inferred 609 items from Category + Price
[2025-09-08 14:04:27] 
=== PHASE 3: FINAL CALCULATIONS ===
[2025-09-08 14:04:27] [OK] Standardized Transaction Date to datetime
[2025-09-08 14:04:27] Ensuring calculation consistency...
[2025-09-08 14:04:27] [OK] All critical columns now complete!
[2025-09-08 14:04:27] [OK] Saved cleaned data: retail_store_sales_clean.csv | Shape=(11971, 11)
[2025-09-08 14:04:27] 
=== CLEANING SUMMARY ===
[2025-09-08 14:04:27] Initial dataset rows: 12,575
[2025-09-08 14:04:27] Rows dropped (unrecoverable): 604
[2025-09-08 14:04:27] Final dataset rows: 11,971
[2025-09-08 14:04:27] Data retention: 95.2%
[2025-09-08 14:04:27] 
Values RECOVERED (using business logic):
[2025-09-08 14:04:27]   prices: 609
[2025-09-08 14:04:27]   quantities: 0
[2025-09-08 14:04:27]   totals: 0
[2025-09-08 14:04:27]   items: 609
[2025-09-08 14:04:27] 
Values IMPUTED (using defaults):
[2025-09-08 14:04:27]   discount_applied: 3,988
[2025-09-08 14:04:27] 
Missing values reduction:
[2025-09-08 14:04:27]   Before: 7,229 missing values
[2025-09-08 14:04:27]   After: 0 missing values
[2025-09-08 14:04:27]   Reduction: 7,229 values recovered/filled
[2025-09-08 14:04:27] 
STEP 2: DATA NORMALIZATION
[2025-09-08 14:04:27] ========================================
[2025-09-08 14:04:27] Created Categories table: 8 records → saved to normalized/categories.csv
[2025-09-08 14:04:27] Created Customers table: 25 records → saved to normalized/customers.csv
[2025-09-08 14:04:27] Created PaymentMethods table: 3 records → saved to normalized/payment_methods.csv
[2025-09-08 14:04:27] Created Locations table: 2 records → saved to normalized/locations.csv
[2025-09-08 14:04:27] Created Items table: 200 records → saved to normalized/items.csv
[2025-09-08 14:04:27] Created Transactions table: 11971 records → saved to normalized/transactions_normalized.csv
[2025-09-08 14:04:27] 
Normalization complete! Created 6 tables
[2025-09-08 14:04:27] 
>> READY FOR MYSQL: Normalized tables saved to C:\Users\guanj\OneDrive\Desktop\SEM\dataset
[2025-09-08 14:04:27]    Use 02_mysql_migration_normalized.py to load into MySQL
[2025-09-08 14:04:27] 
>> MongoDB: Use --denormalize-mongo flag to create denormalized data
[2025-09-08 14:04:27] 
>> SUCCESS: Pipeline completed!
[2025-09-08 14:04:27]    Log saved to: C:\Users\guanj\OneDrive\Desktop\SEM\results\01_pipeline.log
[2025-09-08 14:04:27]    Dropped rows report: C:\Users\guanj\OneDrive\Desktop\SEM\results\01_dropped_rows_report.csv
